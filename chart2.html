<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Approval Status Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>

  <style>
    /* CSS to adjust the size of the canvas element */
    #myChart {
      max-width: 1080px;
      /* Set maximum width */
      max-height: 720px;
      /* Set maximum height */
      width: 100%;
      /* Make sure it scales to its container */
      height: auto;
      /* Automatically adjust height based on width */
    }
  </style>

</head>

<body>
  <canvas id="myChart"></canvas>

  <script>
    // Parse CSV data into arrays
    const csv = `D_YEAR	Approval_Status	CountOfApproval_Status
    2017	Closed	18
    2017	Partial Received	2
    2017	Rejected	7
    2017	Shipping Details Complete	11
    2017	Supply Details Complete	16
    2018	Closed	47
    2018	Partial Received	2
    2018	Partial Shipment	2
    2018	Pending Approval	1
    2018	Rejected	156
    2018	Shipping Details Complete	67
    2018	Supply Details Complete	1294
    2019	Approved	1
    2019	Partial Shipment	3
    2019	Rejected	71
    2019	Shipping Details Complete	38
    2019	Supply Details Complete	1472
    2020	Partial Shipment	12
    2020	Rejected	178
    2020	Shipping Details Complete	487
    2020	Supply Details Complete	1279
    2021	Closed	7
    2021	Partial Received	1
    2021	Partial Shipment	49
    2021	Rejected	289
    2021	Shipping Details Complete	1513
    2021	Supply Details Complete	1522
    2022	Partial Shipment	46
    2022	Rejected	395
    2022	Shipping Details Complete	1022
    2022	Supply Details Complete	1936
    2023	Approved	16
    2023	Partial Shipment	10
    2023	Pending Approval	5
    2023	Rejected	540
    2023	Shipping Details Complete	1061
    2023	Supply Details Complete	2275
    2024	Pending Approval	75
    2024	Rejected	301
    2024	Supply Details Complete	1174`;

    const lines = csv.trim().split('\n');
    const headers = lines.shift().split('\t');
    const data = lines.map(line => Object.fromEntries(line.split('\t').map((value, index) => [headers[index], value])));

    // Organize data into a format suitable for Chart.js
    const years = [...new Set(data.map(entry => entry.D_YEAR))];
    const statuses = [...new Set(data.map(entry => entry.Approval_Status))];
    const datasets = statuses.map(status => ({
      label: status,
      data: years.map(year => {
        const entry = data.find(item => item.D_YEAR === year && item.Approval_Status === status);
        return entry ? parseInt(entry.CountOfApproval_Status) : 0;
      }),
      backgroundColor: getRandomColor(),
    }));

    function getRandomColor() {
      return `rgba(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, 0.7)`;
    }

    // Create and render the chart
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: years,
        datasets: datasets,
      },
      options: {
        scales: {
          x: {
            stacked: true,
          },
          y: {
            stacked: true,
          },
        },
        plugins: {
          zoom: {
            // Enable zooming and panning
            zoomEnabled: true,
            panEnabled: true,
          }
        }
      },
    });
  </script>
</body>

</html>

<canvas id="myChart"></canvas>

<script>
async function fetchData() {
  const response = await fetch('https://your-csv-file-url.csv');
  const csv = await response.text();

  // Parse CSV data into arrays
  const lines = csv.trim().split('\n');
  const headers = lines.shift().split('\t');
  const data = lines.map(line => Object.fromEntries(line.split('\t').map((value, index) => [headers[index], value])));

  // Organize data into a format suitable for Chart.js
  const years = [...new Set(data.map(entry => entry.D_YEAR))];
  const statuses = [...new Set(data.map(entry => entry.Approval_Status))];
  const datasets = statuses.map(status => ({
    label: status,
    data: years.map(year => {
      const entry = data.find(item => item.D_YEAR === year && item.Approval_Status === status);
      return entry ? parseInt(entry.CountOfApproval_Status) : 0;
    }),
    backgroundColor: getRandomColor(),
  }));

  function getRandomColor() {
    return `rgba(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, 0.7)`;
  }

  // Create and render the chart
  const ctx = document.getElementById('myChart').getContext('2d');
  const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: years,
      datasets: datasets,
    },
    options: {
      scales: {
        x: {
          stacked: true,
        },
        y: {
          stacked: true,
        },
      },
      plugins: {
        zoom: {
          // Enable zooming and panning
          zoomEnabled: true,
          panEnabled: true,
        }
      },
    },
  });
}

fetchData();
</script>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Approval Status Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>

  <style>
    /* CSS to adjust the size of the canvas element */
    #myChart {
      max-width: 1080px;
      /* Set maximum width */
      max-height: 720px;
      /* Set maximum height */
      width: 100%;
      /* Make sure it scales to its container */
      height: auto;
      /* Automatically adjust height based on width */
    }
  </style>

</head>

<body>
  <canvas id="myChart"></canvas>

  <script>
    // Replace with the actual CSV file name
    const csvFile = 'your_csv_file.csv';

    let chartData; // To store the parsed data

    // Fetch data from CSV file
    async function fetchData() {
      const response = await fetch(csvFile);
      const csvData = await response.text();
      chartData = parseCSVData(csvData); // Call the parsing function
    }

    fetchData().then(() => {
      createChart(chartData); // Call the chart creation function after data is fetched
    });

    function parseCSVData(csvData) {
      const lines = csvData.trim().split('\n');
      const headers = lines.shift().split('\t');
      const data = lines.map(line => Object.fromEntries(line.split('\t').map((value, index) => [headers[index], value])));

      // Organize data into a format suitable for Chart.js
      const years = [...new Set(data.map(entry => entry.D_YEAR))];
      const statuses = [...new Set(data.map(entry => entry.Approval_Status))];
      const datasets = statuses.map(status => ({
        label: status,
        data: years.map(year => {
          const entry = data.find(item => item.D_YEAR === year && item.Approval_Status === status);
          return entry ? parseInt(entry.CountOfApproval_Status) : 0;
        }),
        backgroundColor: getRandomColor(),
      }));

      function getRandomColor() {
        return `rgba(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, 0.7)`;
      }

      return { years, datasets }; // Return the parsed data
    }

    function createChart(data) {
      const ctx = document.getElementById('myChart').getContext('2d');
      const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: data.years,
          datasets: data.datasets,
        },
        options: {
          scales: {
            x: {
              stacked: true,
            },
            y: {
              stacked: true,
            },
          },
          plugins: {
            zoom: {
              // Enable zooming and panning
              zoomEnabled: true,
              panEnabled: true,
            }
          }
        },
      });
    }
  </script>
</body>

</html>


